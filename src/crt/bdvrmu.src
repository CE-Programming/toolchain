	.assume	adl=1

	.section	.text
	.global	__bdvrmu
	.type	__bdvrmu, @function
	.global	__bdvrmu.hijack_l_dividend
	.type	__bdvrmu.hijack_l_dividend, @function

__bdvrmu:
; I: B=dividend, C=divisor
; O: a=?, b=0, h=B%C, l=B/C

	ld	l, b
__bdvrmu.hijack_l_dividend:

	ld	h, 0
	ld	b, 8

.L.loop:
	add	hl, hl

	ld	a, h
	sub	a, c

	jr	c, .L.bit_skip
	ld	h, a
	inc	l
.L.bit_skip:

	djnz	.L.loop

	ret
