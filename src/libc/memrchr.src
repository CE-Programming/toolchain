	assume	adl=1

	section	.text

	public	_memrchr

_memrchr:
	ld	iy, -1
	add	iy, sp
	ld	bc, (iy + 10)
	sbc	hl, hl
	add	hl, bc
	jr	nc, .ret_zero
	ld	de, (iy + 4)
	add	hl, de
	ld	a, (iy + 7)
	cpdr
	inc	hl
	ret	z	; found match
	; or	a, a	; carry won't be set unless (ptr + size) wraps-around (which is UB)
.ret_zero:
	; return NULL
	sbc	hl, hl
	ret
