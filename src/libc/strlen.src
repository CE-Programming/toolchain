	.assume	adl=1

	.section	.text
	.global	_strlen

.ifdef PREFER_OS_LIBC

	.set	_strlen, 0x0000D4

.else

_strlen:
	pop	iy
	ex	(sp), hl
	xor	a, a
	ld	bc, 0
	cpir
	sbc	hl, hl
	scf
	sbc	hl, bc
	jp	(iy)

.endif
