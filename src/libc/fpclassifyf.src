	.assume	adl=1

	.section	.text

	.global	__fpclassifyf
	.type	__fpclassifyf, @function

; FP_ZERO      := 0
; FP_INFINITE  := 1
; FP_SUBNORMAL := 2
; FP_NAN       := 3
; FP_NORMAL    := 4

; int _fpclassifyf(float)
__fpclassifyf:
	pop	bc
	pop	hl
	pop	de
	push	de
	push	hl
	push	bc
	or	a, a
	adc	hl, hl
	jr	z, .L.mant_zero	; normal, zero, or inf
	ld	hl, 2
	; normal, subnormal, or NaN
.L.mant_zero:
	rl	e
	ret	z	; subnormal or zero
	inc	hl
	inc	e
	ret	z	; inf or NaN
	ld	l, 4
	ret	; normal
