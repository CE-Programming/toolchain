	.assume	adl=1

	.section	.text

	.global	_mempcpy
	.type	_mempcpy, @function

_mempcpy:
	ld	iy, -1
	add	iy, sp
	ld	bc, (iy + 10)	; Load count
	sbc	hl, hl
	add	hl, bc
	ld	de, (iy + 4)	; Load destination
	jr	nc, .L.zero_byte_copy	; zero bytes to copy
	ld	hl, (iy + 7)	; Load source
	ldir
.L.zero_byte_copy:
	ex	de, hl
	ret
