	.assume	adl=1

	.section	.text

	.global	_wcslen
	.type	_wcslen, @function

; size_t wcslen(const wchar_t *str)
_wcslen:
	pop	bc
	ex	(sp), hl
	push	bc
	ld	bc, 1
	xor	a, a
	dec	hl
.L.loop:
	inc	hl
	cpi
	jr	nz, .L.loop
	cp	a, (hl)
	jr	nz, .L.loop
	sbc	hl, hl
	sbc	hl, bc
	ret
